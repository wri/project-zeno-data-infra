from .tree_cover_loss import create

create.__doc__ = """
    # Primary Dataset
    | Dataset Key Aspects | Detailed Description |
    |---------------------|----------------------|
    | **Title** | Tree cover loss |
    | **Description** <br> A descriptive summary of what the dataset is and key details, such as information on geographic coverage, temporal range, and the data sources used. | Tree Cover Loss (Hansen/UMD/GLAD) maps annual global forest loss from 2001 to 2024 at 30-meter resolution using Landsat satellite imagery. It detects stand-replacement disturbances in vegetation over 5 meters tall, including natural forests and plantations.  |
    | **Function / usage notes** <br> The intended use of the dataset. How might users employ this data in order to have some impact in the world? | The dataset supports monitoring annual tree cover loss and deforestation trends, fire impacts, and forestry practices, and is widely used for conservation, land-use planning, and environmental policy analysis. |
    | **Providers**<br/>Who created the data? | UMD/GLAD |
    | **Citation**<br/>How should people cite this dataset? | Hansen et al., 2013. “High-Resolution Global Maps of 21st-Century Forest Cover Change.” |
    | **Methodology** <br> How was this dataset created? | The data were generated using multispectral satellite imagery from the Landsat 5 thematic mapper (TM), the Landsat 7 thematic mapper plus (ETM+), and the Landsat 8 Operational Land Imager (OLI) sensors. Over 1 million satellite images were processed and analyzed, including over 600,000 Landsat 7 images for the 2000-2012 interval, and more than 400,000 Landsat 5, 7, and 8 images for updates for the 2011-2022 interval, and additional images used for 2023 and 2024. The clear land surface observations in the satellite images were assembled and a supervised learning algorithm was applied to identify per pixel tree cover loss. |
    | **Cautions**<br>What should be kept in mind when using this dataset? | • In this data set, “tree cover” is defined as all vegetation greater than 5 meters in height, and may take the form of natural forests or plantations across a range of canopy densities. “Loss” indicates the removal or mortality of tree cover and can be due to a variety of factors, including mechanical harvesting, fire, disease, or storm damage. As such, “loss” does not equate to deforestation.<br/><br/>• Due to variation in research methodology and date of content, tree cover, loss, and gain data sets on GFW cannot be compared accurately against each other. Accordingly, “net” loss cannot be calculated by subtracting figures for tree cover gain from tree cover loss, and current (post-2000) tree cover cannot be determined by subtracting figures for annual tree cover loss from year 2000 tree cover.<br/><br/>• The 2011-2024 data was produced using an updated methodology. Comparisons between the original 2001-2010 data and the 2011-2024 update should be performed with caution.<br/><br/>• In the original publication, the authors evaluated the overall prevalence of false positives (commission errors) in this data at 13%, and the prevalence of false negatives (omission errors) at 12%, though the accuracy varies by biome and thus may be higher or lower in any particular location. The model often misses disturbances in smallholder landscapes, resulting in lower accuracy of the data in sub-Saharan Africa, where this type of disturbance is more common. Largely because of a delay between an actual disturbance and the event being observed by the satellite imagery, the authors are 75% confident that the loss occurred within the stated year, and 97% confident that it occurred within a year before or after. Users of the data can smooth out such uncertainty by examining the average over multiple years. Read our blog series on the accuracy of this data for more information.   |
    | **Resolution** | 30 x 30 meters |
    | **Geographic Coverage** | Global land area (excluding Antarctica and other Arctic islands). |
    | **Update Frequency** | Annual |
    | **Content Date** | 2001-2024 |
    | **Keywords**<br/>A list of keyword tags related to this dataset so that the LLM better identify contexts where it is relevant. | tree cover loss, deforestation |
    
    -----
    
    # Available Intersection Datasets
    ## Drivers (LDACS)
    | Dataset Key Aspects | Detailed Description |
    |---------------------|----------------------|
    | **Title** | Land Disturbance Alert Classification System (LDACS) |
    | **Description** <br>A descriptive summary of what the dataset is and key details, such as information on geographic coverage, temporal range, and the data sources used. | The LDACS classifies the drivers of global vegetation disturbance alerts (DIST-ALERT)(Pickens, Hansen, and Song, 2024) on a quarterly basis using a rule-based approach. Alerts are categorized as potential conversion, wildfires, surface water dynamics, or crop management. This system integrates DIST-ALERT data with thematic layers on fire activity (NASA VIIRS Fire Alerts), surface water dynamics (Pickens et al. 2020), cropland extent (UMD Global Cropland Dynamics (Potapov et al. 2022); ESA WorldCover (Zanaga et al. 2020)), and natural land cover (SBTN Natural Lands), using a rule-based approach to assign probable causes to alerts. Each run of the system processes DIST-ALERT data from the previous 12 months and is updated quarterly. |
    | **Function / usage notes in Zeno**<br>The intended use of the dataset. How might users employ this data in order to have some impact in the world?<br>When should Zeno suggest/use this dataset? Please include examples of use cases (e.g. X dataset can be used for XYZ). You can also include these examples in the prompt spreadsheet. | The LDACS is designed to help users distinguish between disturbances caused by human activity and those resulting from natural events. DIST-ALERTs are assigned to one of five categories: potential conversion, crop management, wildfire, surface water dynamics, or unclassified. The LDACS simplifies the process of identifying alerts that are likely caused by land conversion, with the goal of supporting broader adoption of DIST-ALERT among governments, companies, and conservation organizations. <br>Zeno should use this dataset when a user is interested in why a vegetation disturbance alert has occurred. The LDACS dataset has global coverage and therefore, can be used across all vegetated ecosystems. LDACS data will be made available for the most recent 12-month period and will be updated quarterly. |
    | **Methodology**<br>How was this dataset created? | The Land Disturbance Alert Classification System was developed by combining DIST-ALERT data with a set of thematic data masks derived from multiple geospatial data sources. These masks were used to infer the most likely driver of each vegetation disturbance alert. <br>Each run of the system processes DIST-ALERT data from the previous 12 months, using the alert start date (VEG-DIST-DATE) to filter the data, to ensure that classifications are based on recent and relevant disturbance activity. Because each run processes a rolling 12-month window, a single disturbance event may appear in multiple consecutive quarterly runs (up to three or four times), depending on the timing of its detection. Only DIST-ALERTS that fall under the following criteria were classified under this system: VEG-DIST-COUNT >= 2 and VEG-ANOM-MAX > 50, meaning alerts with less than 50% vegetation loss or fewer than two cloud-free satellite observations are excluded to minimize false positives. <br>The following paragraphs describe the classification logic for each disturbance category:<br>Wildfire: DIST-ALERTs were flagged as fire-related if they occurred within the three months after, and within 3 kilometers of, a VIIRS fire alert, and were located within natural lands as defined by the SBTN Natural Lands Map.<br>Flooding: To identify alert pixels likely associated with surface water dynamics, we used annual surface water dynamic composites (Pickens et al. 2020) to create a binary mask highlighting all pixels where surface water was detected at least once between 1999 and 2021. This mask identifies areas with a history of surface water presence and helps flag locations prone to periodic or irregular inundation. Alerts that fall within the surface water dynamics mask are flagged and classified as flooding. <br>Crop management: DIST-ALERT pixels located within areas mapped as cropland by either the UMD Global Cropland Dynamics dataset (Potapov et al. 2022) or the ESA WorldCover dataset (Zanaga et al. 2020) were classified as crop management changes.<br>Potential conversion: Potential conversion events were then assessed using two metrics from the DIST-ALERT data set: maximum vegetation anomaly (VEG-ANOM-MAX) and alert duration (VEG-DIST-DUR). Alerts were flagged as potential conversion if they occurred in natural lands (SBTN Natural Lands), showed a vegetation loss greater than 50% at any point during the alert period (VEG-ANOM-MAX > 50), and that loss persisted for at least 75 days (VEG-DIST-DUR >= 75). The potential conversion alert pixels were post-processed using morphological operations, a common technique in satellite image analysis to clean up pixel-based maps (Haralick, Sternberg, and Zhuang 1987; Löw et al. 2022; d’Andrimont et al. 2020). Specifically, erosion was applied to remove small or narrow clusters of pixels that may represent noise or false detections. Dilation was then applied to expand the remaining patches outward by one pixel in all directions. While this step helps restore the general shape and spatial extent of larger disturbance areas, it produces a smoothed approximation of the original patch, helping eliminate small gaps and jagged edges while maintaining the overall structure.<br>The resulting classes are merged into a final classification layer using a hierarchical scheme: wildfire takes the highest priority, followed by flooding, crop management, and potential conversion.<br>Unclassified: Alerts that do not meet the criteria for any of the four categories above are assigned to a fifth class, labeled “unclassified” alerts. |
    | **Cautions in Zeno**<br>What should be kept in mind when using this dataset?<br>When should Zeno not suggest/use this dataset? Feel free to include examples of when the data should not be used (e.g. X dataset cannot be used for XYZ). | In contrast to other alert systems, DIST-ALERT continues to monitor pixels where it has identified an alert in the past. The DIST-ALERT retains the date of the most recent detection of disturbance, keeping users informed of the most up-to-date changes.<br>Several input datasets used to produce the LDACS contain temporal gaps or known mapping errors that may affect classification accuracy. Please refer to the technical note for more information on the limitations of the input datasets.<br>The classification system uses a static version of the SBTN natural lands map to identify potential conversion events. This layer is not updated in response to disturbances flagged by DIST-ALERT. For example, if a wildfire occurs in a natural area and is followed by land clearing, the system will still treat the area as natural land if it remains within the boundaries of the original natural lands data set. Updates to this map only occur when the source data set itself is revised, which may result in alerts being evaluated against outdated land use information. As a result, disturbances that alter the ecological state of the land (e.g., severe fire or tree cover loss) are not reflected in the natural lands mask used for classification, potentially contributing to inclusion or exclusion errors depending on the disturbance sequence and timing.<br>Because potential conversion is identified based on the duration of vegetation loss, there is an inherent delay in labeling these alerts. Although vegetation loss may be detected shortly after clearing, alerts are not assigned to the potential conversion class until they exceed the 75-day duration threshold. This delay allows for greater confidence in classification but may reduce the timeliness of conversion detection for rapid response. <br>LDACS data will be made available for the most recent 12-month period and will be updated quarterly. Data prior to this 12-month period will not be available. Additionally, there may be up to a 3-month delay in LDACS data until the quarterly update occurs.<br>LDACS classifies DIST-ALERTs with a minimum of VEG-DIST-COUNT >= 2 and VEG-ANOM-MAX > 50. The DIST-ALERT layer on Zeno has a minimum of VEG-DIST-COUNT >-2 and VEG-ANOM-MAX >= 30, therefore, LDACS classifies a subset of these alerts. DIST-ALERTs with a VEG-ANOM-MAX between 30 to 50 will not be classified through the LDACS. |
    | **Resolution** | 30 x 30 meters |
    | **Geographic Coverage** | Global |
    | **Update Frequency** | Quarterly |
    | **Content Date** | Alerts evaluated over previous 12-month period, updated quarterly. |
    | **Keywords** | alerts, deforestation, conversion, vegetation disturbance, drivers of disturbance |
    | **Band values/meaning**<br>What does the pixel values of each band mean? What are the possible values? | Single band<br>Type: classification<br>Possible values:<br>1 = Wildfire<br>2 = Flooding<br>3 = Crop management<br>4 = Potential conversion<br>5 = Unclassified |

    -----

    **Key Features:**
    - 🆔 Deterministic UUID generation using SHA-1 hashing (UUIDv5)
    - 💾 Automatic payload storage in temporary storage
    - 🔗 Returns a URL to check analytics status
    - ♻️ Idempotent: Identical payloads return the same resource ID

    **Flow:**
    1. Accepts `TreeCoverLossAnalyticsIn` payload
    2. Generates UUID based on payload content
    3. Stores payload as JSON file
    4. Returns resource URL for status checking
    """
